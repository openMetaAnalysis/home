<!DOCTYPE html>
<html lang="en">
<!-- Change all events in intervention to 40; then change all events in intervention among high-dose studies to 25 -->
<head>
<title>openMetaAnalysis - editor</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<!-- jquery -->
<script src="//code.jquery.com/jquery-2.1.3.min.js"> </script>

<!-- tooltip -->
<script type="text/javascript" src="qtip/jquery.qtip.min.js"></script>
<link rel="stylesheet" type="text/css" href="qtip/jquery.qtip.min.css" />

<!-- ocpu library -->
<script src="opencpu/opencpu.js"> </script>

<!-- some optional styling stuff -->
<script src="bootstrap/js/bootstrap.js"> </script>
<script src="jqueryui/jquery-ui-1.10.3.custom.js"> </script>

<!-- jquery-csv from http://code.google.com/p/jquery-csv/ -->
<script src="https://jquery-csv.googlecode.com/git/src/jquery.csv.js"></script>

<!-- http://jqueryui.com/dialog/ -->
<script src="https://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>

<!-- Ajax.org Cloud9 Editor from http://ace.c9.io/#nav=api&api=editor -->
<script src="src-min-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>

<!-- http://www.w3schools.com/jsref/jsref_obj_regexp.asp -->

<script> 
$(document).ready(function(){

$(function() {
$( "#dialog" ).dialog();
});

	var hash = window.location.hash 
	if (hash.length > 1) //location.hash.substring.length
		{
		if (hash.indexOf('instruct')>0 || hash.indexOf('teach')>0)
			{
			$("#column_names").css("display","inline")
			$(".fieldset").css("height","800px")
			$("#topic").val("Example data set")
			$("#measure").val("RR");
			//$(".hastip").css("display","inline")
			$(".teach").css("display","block")
			}
		}
	else
		{
		//$(".hastip").css("display","none")
		$(".teach").css("display","none")
		}
		
	if(isAPIAvailable()) {
	  $('#files').bind('change', handleFileSelect);
	}

  //optional, requires jquery-ui.
  $("#plotdiv").resizable()

  //For Ajax.org Cloud9 Editor
  var editor = ace.edit("editor");
  editor.setTheme("ace/theme/github");
  editor.getSession().setMode("ace/mode/r");
  editor.setFontSize("14px");
  editor.getSession().setUseWrapMode(true);
  
  // drawplot
  function drawplot(){
    $("#plotbutton").attr("disabled", "disabled")
	temp = editor.getSession().getValue()
	//Three replacements below are not required on a local server, but are at https://public.opencpu.org/ocpu/github/
	temp = temp.replace(/\r?\n/g, '')
	temp = temp.replace(/\s+$/g, '')
	temp = temp.replace(/$\s+/g, '')
	temp = temp.replace(/,$/g, '')
	var req = $('#target').contents().find('#plotdiv').r_fun_plot("intervention", {
	  type: $("#type").val(),
	  sortby: $("#sortby").val(),
	  measure: $("#measure").val(),
	  hartung: $("#hartung").prop( "checked" ),
	  independent_variable: $("#independent_variable").val(),
	  cofactorlabel: $("#cofactorlabel").val(),
	  content: temp,
	  topic: $("#topic").val(),
	  lefthand: $("#lefthand").val(),
	  righthand: $("#righthand").val(),
	  theme : $("#theme").val()
    }).always(function(){
      $("#plotbutton").removeAttr("disabled");
    }).fail(function(){
      alert("HTTP error " + req.status + ": " + req.responseText);
    });
  }

  //button handlers
  $("#plotbutton").on("click", function(e){
    e.preventDefault();
    drawplot();
  });

  $("#showeditor").on("click", function(e){
    e.preventDefault();
    if ($("#editorcontainer").css("display") == "none"){
		$("#editorcontainer").css("display","inline")
		$("#target").css("display","inline")
		$("#introduction").css("display","none")
		}
	else {
		$("#introduction").css("display","inline")
		$("#editorcontainer").css("display","none")
		$("#target").css("display","none")
	}
  });

  $("#instructor").on("click", function(e){
    e.preventDefault();
    if ($("#column_names").css("display") == "none"){
		$("#column_names").css("display","inline")
		$("#fieldset").css("height","800px")
		$("#topic").val("Example data set")
		$("#measure").val("RR");
		}
	else {
		$("#column_names").css("display","none")
		$("#fieldset").css("height","800px")
	}
  });

  $("#type").on("change", function(e){
    e.preventDefault();
    if ($("#type").val() == "metaregression")
		{
		$("#metaregression_form").css("display","block")
		$("#metaanalysis_form").css("display","none")
		$("#labels").css("display","none")
		}
    else if ($("#type").val() == "subgroup")
		{
		$("#metaregression_form").css("display","none")
		$("#metaanalysis_form").css("display","block")
		$("#labels").css("display","block")
		}
	else // plain meta-analysis
		{
		$("#metaregression_form").css("display","none")
		$("#metaanalysis_form").css("display","block")
		$("#labels").css("display","block")
		}
  });
  
  $("#independent_variable").on("change", function(e){
    e.preventDefault();
    if ($("#independent_variable").val() == "year")
		{
		$("#cofactorlabel").val("Year of publication");
		}
    else if($("#independent_variable").val() == "cr")
		{
		$("#cofactorlabel").val("Control rate");
		}
    else if($("#independent_variable").val() == "size")
		{
		$("#cofactorlabel").val("Study size");
		}
    else
		{
		$("#cofactorlabel").val("");
		}
  });

  $("#addcommas").on("click", function(e){
    e.preventDefault();
    temp = editor.getValue()
	temp = temp.replace(/\n/g, ',\n')
	temp = temp.replace(/$\s+/g, '')
	temp = temp.replace(/\s+$/g, '')
	temp = temp.replace(/ +/g, ', ')
	temp = temp.replace(/\t/g, ', ')
	temp = temp + ","
	temp = temp.replace(/,,/g, ',')
    editor.setValue(temp,1);
  });

  $(".example").click(function(){
	if($(this).val()=="ex_1") {
		$("#type").val("ignore");
		$("#metaregression_form").css("display","none");
		$("#metaanalysis_form").css("display","block");
		$("#cofactorlabel").css("display","none");
		$("#measure").val("RR");
		$("#sortby").val("year");
		$("#topic").val("'Soma' for reducing social discord (from Brave New World by Aldous Huxley)");
		editor.setValue("Downs, 2012, 12345678, 50, 100, 50, 100, high-dose,\nJones, 2013, 12345678, 50, 100, 50, 100, low-dose,\nSmith, 2014, 12345678, 50, 100, 50, 100, high-dose,\nSnead, 2015, 12345678, 50, 100, 50, 100, low-dose,\nParks, 2016, 12345678, 50, 100, 50, 100, high-dose,",1);
		}
	if($(this).val()=="ex_1a") {
		$("#type").val("ignore");
		$("#metaregression_form").css("display","none");
		$("#metaanalysis_form").css("display","block");
		$("#cofactorlabel").css("display","none");
		$("#measure").val("RR");
		$("#sortby").val("year");
		$("#topic").val("Vitamin D supplementation for fracture prevention");
		editor.setValue("Law, 2006, 16641143, 24, 1762, 20, 1955, 0,\nLips, 1996, 8554248, 135, 1291, 122, 1287, 0,\nLyons, 2007, 17473911, 202, 1725, 209, 1715, 0,\nTrivedi, 2003, 12609940, 43, 1345, 62, 1341, 0,\nChapuy, 1994, 8173430, 255, 1176, 308, 1127, 0,\nChapuy, 2002, 11991447, 97, 393, 55, 190, 0,\nDawson-Hughes, 1997, 9278463, 11, 187, 26, 202, 0,\nGrant, 2005, 15885294, 349, 2649, 341, 2643, 0,\nHarwood, 2000, 14695863, 8, 114, 5, 37, 0,\nJackson, 2006, 16481635, 2102, 18176, 2158, 18106, 0,\nMeyer, 2002, 11918228, 69, 569, 76, 575, 0,\nPfeifer, 2000, 10841179, 3, 70, 6, 67, 0,\nPfeifer, 2009, 18629569, 9, 121, 16, 121, 0,\nSalovaara, 2010, 20200964, 78, 1586, 94, 1609, 0,\nSanders, 2010, 20460620, 171, 1131, 135, 1125, 0,",1);
		}
	if($(this).val()=="ex_1b") {
		$("#type").val("subgroup");
		$("#metaregression_form").css("display","none");
		$("#metaanalysis_form").css("display","block");
		$("#cofactorlabel").css("display","none");
		$("#measure").val("RR");
		$("#sortby").val("year");
		$("#topic").val("Vitamin D supplementation for fracture prevention");
		editor.setValue("Law, 2006, 16641143, 24, 1762, 20, 1955, 'INeffective dose',\nLips, 1996, 8554248, 135, 1291, 122, 1287, 'INeffective dose',\nLyons, 2007, 17473911, 202, 1725, 209, 1715, 'Effective dose',\nTrivedi, 2003, 12609940, 43, 1345, 62, 1341, 'Effective dose',\nChapuy, 1994, 8173430, 255, 1176, 308, 1127, 'Effective dose',\nChapuy, 2002, 11991447, 97, 393, 55, 190, 'Effective dose',\nDawson-Hughes, 1997, 9278463, 11, 187, 26, 202, 'Effective dose',\nGrant, 2005, 15885294, 349, 2649, 341, 2643, 'INeffective dose',\nHarwood, 2000, 14695863, 8, 114, 5, 37, 'INeffective dose',\nJackson, 2006, 16481635, 2102, 18176, 2158, 18106, 'INeffective dose',\nMeyer, 2002, 11918228, 69, 569, 76, 575, 'INeffective dose',\nPfeifer, 2000, 10841179, 3, 70, 6, 67, 'Effective dose',\nPfeifer, 2009, 18629569, 9, 121, 16, 121, 'Effective dose',\nSalovaara, 2010, 20200964, 78, 1586, 94, 1609, 'INeffective dose',\nSanders, 2010, 20460620, 171, 1131, 135, 1125, 'INeffective dose',",1);
		}
	if($(this).val()=="ex_2a") {
		$("#type").val("ignore");
		$("#measure").val("MD");
		$("#topic").val("Nebulised hypertonic saline solution for reducing length of stay from acute bronchiolitis in infants");
		//$("#measure").css("display","inline");
		$("#metaregression_form").css("display","none");
		$("#metaanalysis_form").css("display","block");
		$("#cofactorlabel").css("display","block");
		$("#measure").val("MD");
		$("#sortby").val("year");
		editor.setValue("Mandeberg, 2002, 12576370, 3(1.2), 27, 4(1.9), 25, HS,\nTal, 2006, 16599051, 2.6(1.4), 21, 3.5(1.7), 20, HS,\nKuzik, 2007, 17719935, 2.6(1.9), 47, 3.5(2.9), 49, HS,\nLuo, 2010, 19674354, 6(1.2), 50, 7.4(1.5), 43, HS,\nLuo, 2011, 20636429, 4.8(1.2), 57, 6.4(1.4), 55, HS,\nDel Giudice, 2012, 22697080, 4.9(1.3), 52, 5.6(1.6), 54, HS,\nWu, 2014, 24862623, 3.16(2.11), 197, 3.92(5.24) , 211, HS,",1);
		}
	if($(this).val()=="ex_3a") {
		$("#type").val("metaregression");
		$("#measure").val("MD");
		$("#topic").val("Vitamin D supplementation for fracture prevention");
		$("#metaregression_form").css("display","block");
		$("#metaanalysis_form").css("display","none");
		$("#cofactorlabel").css("display","block");
		$("#independent_variable").val("cf");
		$("#type").val("metaregression");
		$("#cofactorlabel").val("Final vitamin D level");
		editor.setValue("Law, 2006, 16641143, 24, 1762, 20, 1955, 77,\nLips, 1996, 8554248, 135, 1291, 122, 1287, 54,\nLyons, 2007, 17473911, 202, 1725, 209, 1715, 80,\nTrivedi, 2003, 12609940, 43, 1345, 62, 1341, 74.3,\nChapuy, 1994, 8173430, 255, 1176, 308, 1127, 106,\nChapuy, 2002, 11991447, 97, 393, 55, 190, 77.5,\nDawson-Hughes, 1997, 9278463, 11, 187, 26, 202, 112,\nGrant, 2005, 15885294, 349, 2649, 341, 2643, 62,\nHarwood, 2000, 14695863, 8, 114, 5, 37, 44,\nJackson, 2006, 16481635, 2102, 18176, 2158, 18106, 61.4,\nMeyer, 2002, 11918228, 69, 569, 76, 575, 64,\nPfeifer, 2000, 10841179, 3, 70, 6, 67, 66.1,\nPfeifer, 2009, 18629569, 9, 121, 16, 121, 84.5,\nSalovaara, 2010, 20200964, 78, 1586, 94, 1609, 74.6,\nSanders, 2010, 20460620, 171, 1131, 135, 1125, 65,\n",1);
		}
	if($(this).val()=="ex_3b") {
		$("#type").val("metaregression");
		$("#measure").val("MD");
		$("#topic").val("Vitamin D supplementation for fracture prevention");
		$("#metaregression_form").css("display","block");
		$("#metaanalysis_form").css("display","none");
		$("#independent_variable").val("cf");
		$("#cofactorlabel").val("Change in vitamin D level");
		$("#sortby").val("cofactor");
		editor.setValue("Law, 2006, 16641143, 24, 1762, 20, 1955, 18,\nLips, 1996, 8554248, 135, 1291, 122, 1287, 27,\nLyons, 2007, 17473911, 202, 1725, 209, 1715, 26,\nTrivedi, 2003, 12609940, 43, 1345, 62, 1341, 20.9,\nChapuy, 1994, 8173430, 255, 1176, 308, 1127, 66,\nChapuy, 2002, 11991447, 97, 393, 55, 190, 56.2,\nDawson-Hughes, 1997, 9278463, 11, 187, 26, 202, 35.2,\nGrant, 2005, 15885294, 349, 2649, 341, 2643, 24,\nHarwood, 2000, 14695863, 8, 114, 5, 37, 20.5,\nJackson, 2006, 16481635, 2102, 18176, 2158, 18106, 13.4,\nMeyer, 2002, 11918228, 69, 569, 76, 575, 17,\nPfeifer, 2000, 10841179, 3, 70, 6, 67, 40.4,\nPfeifer, 2009, 18629569, 9, 121, 16, 121, 29.1,\nSalovaara, 2010, 20200964, 78, 1586, 94, 1609, 24.6,\nSanders, 2010, 20460620, 171, 1131, 135, 1125, 8,\n",1);
		}
	if($(this).val()=="ex_3c") {
		$("#type").val("metaregression");
		$("#measure").val("MD");
		$("#topic").val("Hypertonic Saline for Reducing Length of Stay for Bronchiolitis");
		$("#metaregression_form").css("display","block");
		$("#metaanalysis_form").css("display","none");
		$("#independent_variable").val("cf");
		$("#cofactorlabel").val("Length of stay in the control group (days)");
		$("#sortby").val("cofactor");
		editor.setValue("Mandeberg, 2002, 12576370, 3(1.2), 27, 4(1.9), 25, Length of stay more than 3 days,\nTal, 2006, 16599051, 2.6(1.4), 21, 3.5(1.7), 20, Length of stay more than 3 days,\nKuzik, 2007, 17719935, 2.6(1.9), 47, 3.5(2.9), 49, Length of stay more than 3 days,\nLuo, 2010, 19674354, 6(1.2), 50, 7.4(1.5), 43, Length of stay more than 3 days,\nLuo, 2011, 20636429, 4.8(1.2), 57, 6.4(1.4), 55, Length of stay more than 3 days,\nMiraglia Del Giudice, 2012, 22697080, 4.9(1.3), 52, 5.6(1.6), 54, Length of stay more than 3 days,\nWu, 2014, 24862623, 3.16(2.11), 197, 3.92(5.24), 211, Length of stay more than 3 days,\nJacobs, 2014, 24344111, 4.1(0.9), 52, 3.9(4.0), 49, Length of stay more than 3 days,\nSABRE, 2014, 25389139, 4.2(3.2), 142, 4.2(3.5), 149, Length of stay more than 3 days,\nSharma, 2014, 23502662, 2.64(0.89), 125, 2.66(0.92), 123, Length of stay less than 3 days,\nTeunissen, 2014, 24969648, 2.9(1.76), 84, 2.2(1.61), 80, Length of stay less than 3 days,\nOjha, 2014, 25574983, 1.87(0.96), 36, 1.82(1.18), 36, Length of stay less than 3 days,\nSilver, 2014, NCT01488448, 2.0(1.48), 93, 2.0(1.33), 97, Length of stay less than 3 days,\nEspelt, 2012, NCT01238848,  5.8(2.7), 37, 5.47(2.1), 45, Length of stay more than 3 days,\nTinsa, 2014, 25574983, 3.5(1.97),37,4.48(3.81),26, Length of stay more than 3 days,\n\n",1);
		}
  });

  function isAPIAvailable() {
    // Check for the various File API support.
    if (window.File && window.FileReader && window.FileList && window.Blob) {
      // Great success! All the File APIs are supported.
      return true;
    } else {
      // source: File API availability - http://caniuse.com/#feat=fileapi
      // source: <output> availability - http://html5doctor.com/the-output-element/
      document.writeln('The HTML5 APIs used in this form are only available in the following browsers:<br />');
      // 6.0 File API & 13.0 <output>
      document.writeln(' - Google Chrome: 13.0 or later<br />');
      // 3.6 File API & 6.0 <output>
      document.writeln(' - Mozilla Firefox: 6.0 or later<br />');
      // 10.0 File API & 10.0 <output>
      document.writeln(' - Internet Explorer: Not supported (partial support expected in 10.0)<br />');
      // ? File API & 5.1 <output>
      document.writeln(' - Safari: Not supported<br />');
      // ? File API & 9.2 <output>
      document.writeln(' - Opera: Not supported');
      return false;
    }
  }

  function handleFileSelect(evt) {
    var files = evt.target.files; // FileList object
    var file = files[0];

    // read the file contents
    printTable(file);

  }

  function printTable(file) {
    var reader = new FileReader();
    reader.readAsText(file);
    reader.onload = function(event){
      var csv = event.target.result;
      var data = $.csv.toArrays(csv);
      var html = '';
      for(var row in data) {
	  if($("#header").val() == "FALSE" || [row] > 0 ){
        for(var item in data[row]) {
          html += data[row][item] + ', ';
        }
        html += '\r\n';
      }
	  }
      editor.setValue(html,1);

    };
    
	reader.onerror = function(){ alert('Unable to read ' + file.fileName); };
	}

	//http://qtip2.com/
	// Apply tooltip on all <a/> elements with title attributes. Mousing over
    // these elements will the show tooltip as expected, but mousing onto the
    // tooltip is now possible for interaction with it's contents.
    //$('a').each(function () {
    $('.hastip').each(function () {
        $(this).qtip({
            content: $(this).next('.tooltiptext'),
            hide: {
                fixed: true,
                delay: 300
            },
			position: {
				my: 'bottom left',  // Position my top left...
				at: 'bottom right', // at the bottom right of...
			},
			style: { classes: 'ToolTipClass'
			}
		});
    });

	$('.hastip').click(function(e) {
		e.stopPropagation();
		return false;
	});	

  //init on start
  //drawplot();
  
	//Ajax
	//http://api.jquery.com/jQuery.getJSON/
	//http://api.jquery.com/jQuery.ajax/
    //$.ajax({
		// you will need to replace this URL with the URL to your CSV file.
		//url: '/ocpu/github/badgettrg/openMetaAnalysis/www/data.csv',
		//dataType: 'json',
		//done: function (data) {
			//alert('success')
			//printTable(data)
		//}
	//});
  
});
</script>
<style>

.container
{
margin-top: 0px;
margin-right: auto;
margin-bottom: 0px;
margin-left: auto;
}

#editor { 
  position: relative;
  width: 950px;
  height: 300px;
}
    
#plotdiv {
  width: 1000px;
  height: 400px;
  border: 1px solid #e3e3e3;
  border-radius: 4px;
}

#plotbutton{
  width: 120px;
  margin-left: 20px;
}

.twocolumns
{
columns:100px 2;
-webkit-columns:100px 2; /* Safari and Chrome */
-moz-columns:100px 2; /* Firefox */
}

/* Menu from http://codepen.io/philhoyt/pen/ujHzd */
#primary_nav_wrap
{
	margin-top:15px;
}

#primary_nav_wrap ul
{
	list-style:none;
	position:relative;
	float:left;
	margin:0;
	padding:0
}

#primary_nav_wrap ul a
{
	display:block;
	background-color:#6DC6E7;
	color:#FFFFFF;
	text-decoration:none;
	font-weight:bold;
	//font-weight:700;
	//font-size:12px;
	line-height:32px;
	padding:0 15px;
	//font-family:"HelveticaNeue","Helvetica Neue",Helvetica,Arial,sans-serif
}

#primary_nav_wrap ul li
{
	position:relative;
	float:left;
	margin:0;
	padding:0
}

#primary_nav_wrap ul li.current-menu-item
{
	background:#0022B4;
		color:#FFFFFF;
}

#primary_nav_wrap ul a:hover
{
	background:#0022B4;
	color:#FFFFFF;
}

#primary_nav_wrap ul ul
{
	display:none;
	position:absolute;
	top:100%;
	left:0;
	background-color:#6DC6E7;
	color:#FFFFFF;
	padding:0
}

#primary_nav_wrap ul ul li
{
	float:none;
	width:200px
}

#primary_nav_wrap ul ul a
{
	line-height:120%;
	padding:10px 15px;
}

#primary_nav_wrap ul ul ul
{
	top:0;
	left:100%
}

#primary_nav_wrap ul li:hover > ul
{
	display:block
}

ul.teach{
	font-style:italic;
	margin-left:5px;
	padding-left:10px;
	margin-top:1px;
	margin-bottom:1px;
}

/* Tooltip */
.tooltiptext{
	display: none;
}
.ToolTipClass{
color:black;
border-color:#0022B4;
background-color: #6DC6E7
}

</style>
</head>

<body>
<!-- 
http://jquery-csv.googlecode.com/git/examples/basic-usage.html
http://jquery-csv.googlecode.com/git/examples/flot.html -> seems best and most stable without reticulating spines error
http://code.google.com/p/jquery-csv/wiki/API -> instructions
-->
  <div class="container" style="width:1000px;">

    <div class="page-header">
      <div style="color:#0022B4">
	  <h1>openMetaAnalysis: <span style="font-size:50%">collaborative and continuous</span></h1>
	  </div>
<nav id="primary_nav_wrap">
<ul id="menu">
<li><a href="http://openmetaanalysis.github.io/" class="menuitem">Home</a></li>
<li><a href="#" class="menuitem">Editors</a>
	<ul>
	<li><a href="https://openmetaanalysis.ocpu.io/home/www/editor.html" class="menuitem">Intervention</a></li>
	<li><a href="https://openmetaanalysis.ocpu.io/home/www/editor.html#instruct" class="menuitem">Intervention (instructional)</a></li>
	<li><a href="https://openmetaanalysis.ocpu.io/home/www/editor-dx.html" class="menuitem">Diagnosis</a></li>
	<li ><a href="https://openmetaanalysis.ocpu.io/home/www/arrows.html" class="menuitem">Arrows Plot</a></li>
	</ul>
</li>
<li><a href="http://openmetaanalysis.github.io/methods.html" class="menuitem">Methods</a></li>
<li><a href="http://openmetaanalysis.github.io/contribute.html" class="menuitem">Get involved</a></li>
</ul>
</nav>
</div>
<div style="clear:both">&nbsp;</div>

	  <div id="editorcontainer" style="display:block">
      <div style="width:600px;float:left;">

        <form id="paramform" target="target" style="width:600px;">
          <fieldset style="border: 3px solid #6DC6E7; background-color: #FFFFFF;width:500px;height:800px;" id="fieldset">
            <legend style="font-weight:bold">Enter inputs</legend>
            <div>To perform a <a href="https://en.wikipedia.org/wiki/Meta-analysis">meta-analysis</a> of interventions (11/30/2014 converted to Hartung and Knapp estimators for broader confidence intervals. See PMID <a href="Http://pubmed.gov/24727843">24727843</a>):</div>
			<ul>
			<li>Revise or replace the example data below as needed or</li>
			<li>Upload a csv file formatted like this <a href="example.csv">example</a>.<br/>
			<input type=file id=files name=files style="width:200px"/>
			1st row is column names? <select id="header" name="header"><option value=TRUE> TRUE </option> <option value=FALSE> FALSE </option> </select>
			</li>
			</ul>
<div >Eight columns: 1) study name, 2) year, 3) <a href="http://www.ncbi.nlm.nih.gov/books/NBK3827/#pubmedhelp.Unique_Identifier_PM">PMID</a>, 4) events of mean (SD) in intervention group, 5) total in intervention group, 6) events or mean (SD) in control group, 7) total in control group, 8) cofactor. <br/>
Separate columns with commas. <a id="addcommas" href="#">Click here</a> to add commas.</div>
<div >The initial data shown below is fictitious and is <a href="#" id="instructor">instructional</a>.</div>
<div id="column_names" style="display:none"><img src="column_names.png" alt="Image of column names"/></div>
<div id="editor" style="width:600px;">Downs, 2012, 12345678, 50, 100, 50, 100, high-dose,
Jones, 2013, 12345678, 50, 100, 50, 100, low-dose,
Smith, 2014, 12345678, 50, 100, 50, 100, high-dose,
Snead, 2015, 12345678, 50, 100, 50, 100, low-dose,
Parks, 2016, 12345678, 50, 100, 50, 100, high-dose,</div>
<!--Law, 2006, 16641143, 24, 1762, 20, 1955, 0,
Lips, 1996, 8554248, 135, 1291, 122, 1287, 0,
Lyons, 2007, 17473911, 202, 1725, 209, 1715, 0,
Trivedi, 2003, 12609940, 43, 1345, 62, 1341, 0,
Chapuy, 1994, 8173430, 255, 1176, 308, 1127, 0,
Chapuy, 2002, 11991447, 97, 393, 55, 190, 0,
Dawson-Hughes, 1997, 9278463, 11, 187, 26, 202, 0,
Grant, 2005, 15885294, 349, 2649, 341, 2643, 0,
Harwood, 2000, 14695863, 8, 114, 5, 37, 0,
Jackson, 2006, 16481635, 2102, 18176, 2158, 18106, 0,
Meyer, 2002, 11918228, 69, 569, 76, 575, 0,
Pfeifer, 2000, 10841179, 3, 70, 6, 67, 0,
Pfeifer, 2009, 18629569, 9, 121, 16, 121, 0,
Salovaara, 2010, 20200964, 78, 1586, 94, 1609, 0,
Sanders, 2010, 20460620, 171, 1131, 135, 1125, 0,-->
	
            <br />

            <div style="float:left">
			<select id="type" style="float:left">
              <option value="ignore" selected>Ignore cofactor/subgroup</option>
              <option value="subgroup">Subgroup analysis</option>
              <option value="metaregression">Meta-regression analysis</option>
            </select>
			</div>

			<select id="measure" style="width:250px;float:right">
              <option value="OR" selected>Odds ratio</option>
              <option value="RR">Relative risk</option>
              <option value="MD">Mean difference</option>
              <option value="SMD">Standardized mean difference</option>
              <option value="ROM">Ratio of means</option>
            </select><br>
			<div id="metaanalysis_form" style="width:250px;float:right">
			<input type="checkbox" id="hartung" checked /><label for="hartung"><a href="#" class="hastip">Knapp-Hartung adjustment</a><div class="tooltiptext">This should be clicked per PMID: <a href="http://pubmed.gov/24727843">24727843</a>. However, unclick this if yields wacky confidence intervals.</div></label>
			</div>

			<div id="metaregression_form" style="display:none;width:250px;float:right">
			<select id="independent_variable" style="width:250px;float:right">
              <option value="na" selected>Select independent variable</option>
              <option value="cf">Cofactor</option>
              <option value="size">Study size</option>
              <option value="year">Year</option>
              <option value="cr">Control rate</option>
            </select>
			<br>
			<input type="text" id="cofactorlabel" placeholder="Label for cofactor on x-axis" style="width:250px;float:right" /> 
            </div>
			
			<div id="labels" style="clear:both">
			<label style="float:left">Sort order:</label><br>
			<select id="sortby" style="width:250px;float:left">
              <option value="cofactor">Cofactor (ascending)</option>
              <option value="baseline">Baseline value in control group</option>
              <option value="study">Study name</option>
              <option value="weight">Weight (descending)</option>
              <option value="year" selected>Year (ascending)</option>
            </select>
			<br>
			<label>Left label:</label>
			<select id="lefthand">
			  <option value="favors experimental" selected>favors experimental</option>
			  <option value="favors control">favors control</option>
			</select>&nbsp;&nbsp;
			<label>Right label:</label> 			
			<select id="righthand">
			  <option value="favors experimental">favors experimental</option>
			  <option value="favors control" selected>favors control</option>
			</select>
			</div> 
			<div style="clear:both"> 
            <label>Topic (for title - optional):</label> 
            <input type="text" id="topic" placeholder="Topic" style="float:right;width:375px"/> 
            <select id="theme" style="display:none">
              <option value="white" selected>None theme</option>
              <option value="KU">KU</option>
            </select>
			</div> 
            <button class="btn btn-small btn-primary" id="plotbutton"><i class="icon-ok icon-white"></i> Update Plot (below)</button>
          </fieldset>
        </form>
      </div>
      <div style="width:350px;float:right">
	          <form name="form2" action="#" style="width:350px;">
          <fieldset style="border: 3px solid #6DC6E7; background-color: #FFFFFF;width:350px;height:800px;">
		  <legend style="font-weight:bold">Example analyses</legend>
		  <div >Fictitious example based on <a href="http://en.wikipedia.org/wiki/Brave_New_World">Brave New World</a></div>
			<div><input type="radio" name="example" class="example" value="ex_1" id="ex_1" /><label for="ex_1">Simple dataset</label>
				<i>
				<div class="teach">Before making the plot</div>
				<ul class="teach">
				<li>Do you believe Soma will show a benefit when the studies are pooled?</li>
				</ul>
				<div class="teach">Now, look at the plot</div>
				<ul class="teach">
				<li>What does I-squared indicate?</li>
				</ul>
				</i>
			</div>
			<h3 style="margin-bottom:0px">Meta-analysis of binary outcomes</h3>
		  <div >Example: <a href="https://github.com/openMetaAnalysis/Vitamin-D-for-fracture-prevention/blob/master/README.md">vitamin D for the prevention of osteoporotic fractures</a>.</div>
			<div><input type="radio" name="example" class="example" value="ex_1a" id="ex_1a" /><label for="ex_1a">Include all studies; no subgroups</label> 
			<i class="teach">When pooled, is there a significant difference? What does i-squared suggest?</i></div>
			<div><input type="radio" name="example" class="example" value="ex_1b" id="ex_1b"/><label for="ex_1b">Subgroup</label> 
			<i class="teach">What does subgrouping reveal?</i></div>

			<h3 style="margin-bottom:0px">Meta-analysis of continuous outcomes</h3>
		  <div >Example: <a href="http://openmetaanalysis.github.io/Hypertonic-Saline-for-Bronchiolitis/">hypertonic saline to reduce length of stay in hospitalized children with bronchiolitis</a></div>
			<div><input type="radio" name="example" class="example" value="ex_2a" id="ex_2a" /><label for="ex_2a">Include all studies; no subgroups</label></div>
			<div ><a href="#" class="hastip">About standardized mean differences</a>
				<div class="tooltiptext">
				The standardized mean difference (SMD) is:<br/>
				<img src="smd.png" alt="SMD"/><br/>
				In the interpretation of SMD:
				<ul>
					<li>0.2 represents a small effect</li>
					<li>0.5 a moderate effect</li>
					<li>> 0.8 a large effect</li> 
				</ul>
				<div >The 'standardization' allows pooling of different types of outcomes.</div>
				<div >From: Cochrane Handbook. 12.6  <a href="http://handbook.cochrane.org/chapter_12/12_6_2_re_expressing_smds_using_rules_of_thumb_for_effect_sizes.htm">Interpreting results from continuous outcomes (including standardized mean differences)</a></div>
				</div>
			</div>
			<h3 style="margin-bottom:0px">Meta-regression</h3>
		  <div >Example: <a href="https://github.com/openMetaAnalysis/Vitamin-D-for-fracture-prevention/blob/master/README.md">vitamin D for the prevention of osteoporotic fractures</a>.</div>
			<div><input type="radio" name="example" class="example" value="ex_3a" id="ex_3a"/><label for="ex_3a">Meta-regression of final Vitamin D level.</label>
			<i class="teach">What is the relationship between the final vitamin D level and the risk of fracture?</i>
			</div>
			<div><input type="radio" name="example" class="example" value="ex_3b" id="ex_3b"/><label for="ex_3b">Meta-regression of change in Vitamin D level</label> 
			<i class="teach">What is the relationship between the change in vitamin D level and the risk of fracture?</i>
			</div>
		  <div >Example: <a href="http://openmetaanalysis.github.io/Hypertonic-Saline-for-Bronchiolitis/">Hypertonic Saline for reducing length of stay in bronchiolitis</a>.</div>
			<div><input type="radio" name="example" class="example" value="ex_3c" id="ex_3c"/><label for="ex_3c">Meta-regression of change in Vitamin D level</label> 
			<i class="teach">What is the relationship between the length of stay in the control group and the benefit of hypertonic saline?</i>
			</div>
	  </fieldset>
</form>
	</div>
	
	<div style="clear:both">&nbsp;</div>
	</div>
	<div >Hint: if bad spacing between title/footer text and the plot, click 'png' file type in upper right of plot. Then alter dimensions in the url of the window of the image.</div>
	<iframe id="target" style="width:1000px;height:600px;border: 3px solid #6DC6E7;display:block" name="target" width="700px" height="600px" src="output.html">
	</iframe>
	
</div>
	
</body>
</html>
